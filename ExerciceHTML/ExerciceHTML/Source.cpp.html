#include &lt;iostream&gt;<br>#include &lt;fstream&gt;<br>#include &lt;vector&gt;<br>#include &lt;string&gt;<br>#include &lt;map&gt;<br>#include &lt;regex&gt;<br>#include &lt;algorithm&gt;<br>#include &lt;sstream&gt;<br>#include &lt;chrono&gt;<br> <span style='color:blue'> using</span>  <span style='color:blue'> namespace</span> std;<br> <span style='color:blue'> using</span>  <span style='color:blue'> namespace</span> std::chrono;<br><br>vector&lt;string&gt; ReadFile(string filename);<br> <span style='color:blue'> void</span> setArguments( <span style='color:blue'> int</span> argc,  <span style='color:blue'> char</span>* argv[], vector&lt;string&gt; &amp;SourceFiles, vector&lt;string&gt; &amp;Options);<br> <span style='color:blue'> void</span> Write(vector&lt;string&gt; words, string filename);<br> <span style='color:blue'> void</span> Replace(vector&lt;string&gt; &amp;words,  <span style='color:blue'> bool</span> color);<br> <span style='color:blue'> void</span> addWords(vector&lt;string&gt; &amp;allWords, vector&lt;string&gt; words);<br> <span style='color:blue'> void</span> SetStats(vector&lt;string&gt; words);<br>std::vector&lt;std::string&gt; &amp;split( <span style='color:blue'> const</span> std::string &amp;s,  <span style='color:blue'> char</span> delim, std::vector&lt;std::string&gt; &amp;elems) {<br>&nbsp&nbsp&nbsp&nbsp;std::stringstream ss(s);<br>&nbsp&nbsp&nbsp&nbsp;std::string item;<br>&nbsp&nbsp&nbsp&nbsp; <span style='color:blue'> while</span> (std::getline(ss, item, delim)) {<br>&nbsp&nbsp&nbsp&nbsp;&nbsp&nbsp&nbsp&nbsp; <span style='color:blue'> if</span> (item.length() &gt; 0) {<br>&nbsp&nbsp&nbsp&nbsp;&nbsp&nbsp&nbsp&nbsp;&nbsp&nbsp&nbsp&nbsp;elems.push_back(item);<br>&nbsp&nbsp&nbsp&nbsp;&nbsp&nbsp&nbsp&nbsp;}<br>&nbsp&nbsp&nbsp&nbsp;}<br>&nbsp&nbsp&nbsp&nbsp; <span style='color:blue'> return</span> elems;<br>}<br><br> <span style='color:blue'> int</span> main( <span style='color:blue'> int</span> argc,  <span style='color:blue'> char</span>* argv[])<br>{<br>&nbsp&nbsp&nbsp&nbsp;vector&lt;string&gt; Files;<br>&nbsp&nbsp&nbsp&nbsp;vector&lt;string&gt; Options;<br>&nbsp&nbsp&nbsp&nbsp;vector&lt;string&gt; allWords;<br>&nbsp&nbsp&nbsp&nbsp;setArguments(argc, argv, Files, Options);<br><br>&nbsp&nbsp&nbsp&nbsp; <span style='color:blue'> bool</span> color =  <span style='color:blue'> false</span>;<br>&nbsp&nbsp&nbsp&nbsp; <span style='color:blue'> bool</span> stats =  <span style='color:blue'> false</span>;<br>&nbsp&nbsp&nbsp&nbsp; <span style='color:blue'> for</span> ( <span style='color:blue'> int</span> i = 0; i &lt; Options.size(); ++i)<br>&nbsp&nbsp&nbsp&nbsp;{<br>&nbsp&nbsp&nbsp&nbsp;&nbsp&nbsp&nbsp&nbsp; <span style='color:blue'> if</span> (Options.at(i) == "couleur")<br>&nbsp&nbsp&nbsp&nbsp;&nbsp&nbsp&nbsp&nbsp;&nbsp&nbsp&nbsp&nbsp;color =  <span style='color:blue'> true</span>;<br>&nbsp&nbsp&nbsp&nbsp;&nbsp&nbsp&nbsp&nbsp; <span style='color:blue'> else</span>  <span style='color:blue'> if</span> (Options.at(i) == "stats")<br>&nbsp&nbsp&nbsp&nbsp;&nbsp&nbsp&nbsp&nbsp;&nbsp&nbsp&nbsp&nbsp;stats =  <span style='color:blue'> true</span>;<br>&nbsp&nbsp&nbsp&nbsp;}<br><br>&nbsp&nbsp&nbsp&nbsp; <span style='color:blue'> if</span> (Files.size() &lt;= 0)<br>&nbsp&nbsp&nbsp&nbsp;&nbsp&nbsp&nbsp&nbsp;Files.push_back("Source.cpp");<br><br>&nbsp&nbsp&nbsp&nbsp; <span style='color:blue'> for</span> ( <span style='color:blue'> int</span> i = 0; i &lt; Files.size(); ++i)<br>&nbsp&nbsp&nbsp&nbsp;{<br>&nbsp&nbsp&nbsp&nbsp;&nbsp&nbsp&nbsp&nbsp;vector&lt;string&gt; words = ReadFile(Files.at(i));<br>&nbsp&nbsp&nbsp&nbsp;&nbsp&nbsp&nbsp&nbsp;Replace(words, color);<br>&nbsp&nbsp&nbsp&nbsp;&nbsp&nbsp&nbsp&nbsp;Write(words, Files.at(i));<br>&nbsp&nbsp&nbsp&nbsp;&nbsp&nbsp&nbsp&nbsp;addWords(allWords, words);<br>&nbsp&nbsp&nbsp&nbsp;}<br>&nbsp&nbsp&nbsp&nbsp;<br>&nbsp&nbsp&nbsp&nbsp; <span style='color:blue'> if</span> (stats)<br>&nbsp&nbsp&nbsp&nbsp;&nbsp&nbsp&nbsp&nbsp;SetStats(allWords);<br>}<br><br> <span style='color:blue'> void</span> setArguments( <span style='color:blue'> int</span> argc, <span style='color:blue'> char</span>* argv[], vector&lt;string&gt; &amp;SourceFiles, vector&lt;string&gt; &amp;Options)<br>{<br>&nbsp&nbsp&nbsp&nbsp; <span style='color:blue'> for</span> ( <span style='color:blue'> int</span> i = 0; i &lt; argc; ++i)<br>&nbsp&nbsp&nbsp&nbsp;{<br>&nbsp&nbsp&nbsp&nbsp;&nbsp&nbsp&nbsp&nbsp;string param = argv[i];<br>&nbsp&nbsp&nbsp&nbsp;&nbsp&nbsp&nbsp&nbsp; <span style='color:blue'> if</span> (param[0] == '-' || param[0] == '/')<br>&nbsp&nbsp&nbsp&nbsp;&nbsp&nbsp&nbsp&nbsp;&nbsp&nbsp&nbsp&nbsp;Options.push_back(param.substr(1));<br>&nbsp&nbsp&nbsp&nbsp;&nbsp&nbsp&nbsp&nbsp; <span style='color:blue'> else</span>  <span style='color:blue'> if</span> (param.find(".cpp") != std::string::npos)<br>&nbsp&nbsp&nbsp&nbsp;&nbsp&nbsp&nbsp&nbsp;&nbsp&nbsp&nbsp&nbsp;SourceFiles.push_back(param);<br>&nbsp&nbsp&nbsp&nbsp;}<br>}<br><br>vector&lt;string&gt; ReadFile(string filename)<br>{<br>&nbsp&nbsp&nbsp&nbsp;vector&lt;string&gt; sentences;<br>&nbsp&nbsp&nbsp&nbsp;ifstream file(filename);<br>&nbsp&nbsp&nbsp&nbsp; <span style='color:blue'> if</span> (file.is_open())<br>&nbsp&nbsp&nbsp&nbsp;{<br>&nbsp&nbsp&nbsp&nbsp;&nbsp&nbsp&nbsp&nbsp; <span style='color:blue'> for</span> (string line; getline(file, line);)<br>&nbsp&nbsp&nbsp&nbsp;&nbsp&nbsp&nbsp&nbsp;&nbsp&nbsp&nbsp&nbsp;sentences.push_back(line);<br>&nbsp&nbsp&nbsp&nbsp;}<br>&nbsp&nbsp&nbsp&nbsp;file.close();<br>&nbsp&nbsp&nbsp&nbsp; <span style='color:blue'> return</span> sentences;<br>}<br><br> <span style='color:blue'> void</span> Write(vector&lt;string&gt; words, string filename)<br>{<br>&nbsp&nbsp&nbsp&nbsp;ofstream file(filename + ".html");<br>&nbsp&nbsp&nbsp&nbsp; <span style='color:blue'> for</span> ( <span style='color:blue'> int</span> i = 0; i &lt; words.size(); ++i)<br>&nbsp&nbsp&nbsp&nbsp;&nbsp&nbsp&nbsp&nbsp;file &lt;&lt; words.at(i) &lt;&lt; "&lt;br&gt;" &lt;&lt; flush;<br>&nbsp&nbsp&nbsp&nbsp;file.close();<br>}<br><br> <span style='color:blue'> void</span> Replace(vector&lt;string&gt; &amp;words,  <span style='color:blue'> bool</span> color)<br>{<br>&nbsp&nbsp&nbsp&nbsp;vector&lt;string&gt; keywords = vector&lt;string&gt;{&nbsp&nbsp&nbsp&nbsp;" <span style='color:blue'> alignas</span>", " <span style='color:blue'> alignof</span>", " <span style='color:blue'> and</span>", " <span style='color:blue'> and_eq</span>", " <span style='color:blue'> asm</span>", " <span style='color:blue'> auto</span>",<br>&nbsp&nbsp&nbsp&nbsp;&nbsp&nbsp&nbsp&nbsp;" <span style='color:blue'> bitand</span>", " <span style='color:blue'> bitor</span>", " <span style='color:blue'> bool</span>", " <span style='color:blue'> break</span>", " <span style='color:blue'> case</span>", " <span style='color:blue'> catch</span>",<br>&nbsp&nbsp&nbsp&nbsp;&nbsp&nbsp&nbsp&nbsp;" <span style='color:blue'> char</span>", " <span style='color:blue'> char16_t</span>", " <span style='color:blue'> char32_t</span>", " <span style='color:blue'> class</span>", " <span style='color:blue'> compl</span>",<br>&nbsp&nbsp&nbsp&nbsp;&nbsp&nbsp&nbsp&nbsp;" <span style='color:blue'> concept</span>", " <span style='color:blue'> const</span>", " <span style='color:blue'> constexpr</span>", " <span style='color:blue'> const_cast</span>",<br>&nbsp&nbsp&nbsp&nbsp;&nbsp&nbsp&nbsp&nbsp;" <span style='color:blue'> continue</span>", " <span style='color:blue'> decltype</span>", " <span style='color:blue'> default</span>", " <span style='color:blue'> delete</span>", " <span style='color:blue'> do</span>",<br>&nbsp&nbsp&nbsp&nbsp;&nbsp&nbsp&nbsp&nbsp;" <span style='color:blue'> double</span>", " <span style='color:blue'> dynamic_cast</span>", " <span style='color:blue'> else</span>", " <span style='color:blue'> enum</span>", " <span style='color:blue'> explicit</span>",   <br>&nbsp&nbsp&nbsp&nbsp;&nbsp&nbsp&nbsp&nbsp;" <span style='color:blue'> export</span>", " <span style='color:blue'> extern</span>", " <span style='color:blue'> false</span>", " <span style='color:blue'> float</span>", " <span style='color:blue'> for</span>", " <span style='color:blue'> friend</span>",<br>&nbsp&nbsp&nbsp&nbsp;&nbsp&nbsp&nbsp&nbsp;" <span style='color:blue'> goto</span>", " <span style='color:blue'> if</span>", " <span style='color:blue'> inline</span>", " <span style='color:blue'> int</span>", " <span style='color:blue'> long</span>", " <span style='color:blue'> mutable</span>",<br>&nbsp&nbsp&nbsp&nbsp;&nbsp&nbsp&nbsp&nbsp;" <span style='color:blue'> namespace</span>", " <span style='color:blue'> new</span>", " <span style='color:blue'> noexcept</span>", " <span style='color:blue'> not</span>", " <span style='color:blue'> not_eq</span>",<br>&nbsp&nbsp&nbsp&nbsp;&nbsp&nbsp&nbsp&nbsp;" <span style='color:blue'> nullptr</span>", " <span style='color:blue'> operator</span>", " <span style='color:blue'> or</span>", " <span style='color:blue'> or_eq</span>", " <span style='color:blue'> private</span>",<br>&nbsp&nbsp&nbsp&nbsp;&nbsp&nbsp&nbsp&nbsp;" <span style='color:blue'> protected</span>", " <span style='color:blue'> public</span>", " <span style='color:blue'> register</span>", " <span style='color:blue'> reinterpret_cast</span>",<br>&nbsp&nbsp&nbsp&nbsp;&nbsp&nbsp&nbsp&nbsp;" <span style='color:blue'> requires</span>", " <span style='color:blue'> return</span>", " <span style='color:blue'> short</span>", " <span style='color:blue'> signed</span>", " <span style='color:blue'> sizeof</span>",<br>&nbsp&nbsp&nbsp&nbsp;&nbsp&nbsp&nbsp&nbsp;" <span style='color:blue'> static</span>", " <span style='color:blue'> static_assert</span>", " <span style='color:blue'> static_cast</span>", " <span style='color:blue'> struct</span>",<br>&nbsp&nbsp&nbsp&nbsp;&nbsp&nbsp&nbsp&nbsp;" <span style='color:blue'> switch</span>", " <span style='color:blue'> template</span>", " <span style='color:blue'> this</span>", " <span style='color:blue'> thread_local</span>", " <span style='color:blue'> throw</span>",<br>&nbsp&nbsp&nbsp&nbsp;&nbsp&nbsp&nbsp&nbsp;" <span style='color:blue'> true</span>", " <span style='color:blue'> try</span>", " <span style='color:blue'> typedef</span>", " <span style='color:blue'> typeid</span>", " <span style='color:blue'> typename</span>", " <span style='color:blue'> union</span>",<br>&nbsp&nbsp&nbsp&nbsp;&nbsp&nbsp&nbsp&nbsp;" <span style='color:blue'> unsigned</span>", " <span style='color:blue'> using</span>", " <span style='color:blue'> virtual</span>", " <span style='color:blue'> void</span>", " <span style='color:blue'> volatile</span>",<br>&nbsp&nbsp&nbsp&nbsp;&nbsp&nbsp&nbsp&nbsp;" <span style='color:blue'> wchar_t</span>", " <span style='color:blue'> while</span>", " <span style='color:blue'> xor</span>", " <span style='color:blue'> xor_eq</span>"};<br>&nbsp&nbsp&nbsp&nbsp;<br>&nbsp&nbsp&nbsp&nbsp;regex expression("");<br>&nbsp&nbsp&nbsp&nbsp; <span style='color:blue'> for</span>( <span style='color:blue'> auto</span> debut = begin(words); debut != end(words); ++debut)<br>&nbsp&nbsp&nbsp&nbsp;{<br>&nbsp&nbsp&nbsp&nbsp;&nbsp&nbsp&nbsp&nbsp;*debut = regex_replace(*debut, regex{ "&amp;" }, "&amp;amp;");<br>&nbsp&nbsp&nbsp&nbsp;&nbsp&nbsp&nbsp&nbsp;*debut = regex_replace(*debut, regex{ "&lt;" }, "&amp;lt;");<br>&nbsp&nbsp&nbsp&nbsp;&nbsp&nbsp&nbsp&nbsp;*debut = regex_replace(*debut, regex{ "&gt;" }, "&amp;gt;");<br>&nbsp&nbsp&nbsp&nbsp;&nbsp&nbsp&nbsp&nbsp;*debut = regex_replace(*debut, regex{ "\\t" }, "&amp;nbsp&amp;nbsp&amp;nbsp&amp;nbsp;");<br>&nbsp&nbsp&nbsp&nbsp;&nbsp&nbsp&nbsp&nbsp; <span style='color:blue'> if</span> (color)<br>&nbsp&nbsp&nbsp&nbsp;&nbsp&nbsp&nbsp&nbsp;{<br>&nbsp&nbsp&nbsp&nbsp;&nbsp&nbsp&nbsp&nbsp;&nbsp&nbsp&nbsp&nbsp; <span style='color:blue'> for</span> ( <span style='color:blue'> auto</span> keywordPos = begin(keywords); keywordPos != end(keywords); ++keywordPos)<br>&nbsp&nbsp&nbsp&nbsp;&nbsp&nbsp&nbsp&nbsp;&nbsp&nbsp&nbsp&nbsp;{<br>&nbsp&nbsp&nbsp&nbsp;&nbsp&nbsp&nbsp&nbsp;&nbsp&nbsp&nbsp&nbsp;&nbsp&nbsp&nbsp&nbsp;expression = "\\b" + *keywordPos + "\\b";<br>&nbsp&nbsp&nbsp&nbsp;&nbsp&nbsp&nbsp&nbsp;&nbsp&nbsp&nbsp&nbsp;&nbsp&nbsp&nbsp&nbsp;*debut = regex_replace(*debut, expression, " &lt;span style='color:blue'&gt; " + *keywordPos + "&lt;/span&gt;");<br>&nbsp&nbsp&nbsp&nbsp;&nbsp&nbsp&nbsp&nbsp;&nbsp&nbsp&nbsp&nbsp;}<br>&nbsp&nbsp&nbsp&nbsp;&nbsp&nbsp&nbsp&nbsp;}<br>&nbsp&nbsp&nbsp&nbsp;}<br><br>}<br><br> <span style='color:blue'> void</span> addWords(vector&lt;string&gt; &amp;allWords, vector&lt;string&gt; words)<br>{<br>&nbsp&nbsp&nbsp&nbsp; <span style='color:blue'> for</span> ( <span style='color:blue'> int</span> i = 0; i &lt; words.size(); ++i)<br>&nbsp&nbsp&nbsp&nbsp;&nbsp&nbsp&nbsp&nbsp;allWords.push_back(words.at(i));<br>}<br><br> <span style='color:blue'> void</span> SetStats(vector&lt;string&gt; words)<br>{<br>&nbsp&nbsp&nbsp&nbsp;regex expression("\\d+\\.?\\d*|\\w+");<br>&nbsp&nbsp&nbsp&nbsp;map&lt;string,  <span style='color:blue'> int</span>&gt; stats;<br>&nbsp&nbsp&nbsp&nbsp;smatch match;<br>&nbsp&nbsp&nbsp&nbsp; <span style='color:blue'> for</span> ( <span style='color:blue'> int</span> i = 0; i &lt; words.size(); ++i)<br>&nbsp&nbsp&nbsp&nbsp;{<br>&nbsp&nbsp&nbsp&nbsp;&nbsp&nbsp&nbsp&nbsp;string sentence = words.at(i);<br>&nbsp&nbsp&nbsp&nbsp;&nbsp&nbsp&nbsp&nbsp; <span style='color:blue'> while</span> (regex_search(sentence, match, expression))<br>&nbsp&nbsp&nbsp&nbsp;&nbsp&nbsp&nbsp&nbsp;{<br>&nbsp&nbsp&nbsp&nbsp;&nbsp&nbsp&nbsp&nbsp;&nbsp&nbsp&nbsp&nbsp; <span style='color:blue'> for</span> ( <span style='color:blue'> auto</span>&amp; mot : match)<br>&nbsp&nbsp&nbsp&nbsp;&nbsp&nbsp&nbsp&nbsp;&nbsp&nbsp&nbsp&nbsp;&nbsp&nbsp&nbsp&nbsp;stats[mot.str()]++;<br>&nbsp&nbsp&nbsp&nbsp;&nbsp&nbsp&nbsp&nbsp;&nbsp&nbsp&nbsp&nbsp;sentence = match.suffix().str();<br>&nbsp&nbsp&nbsp&nbsp;&nbsp&nbsp&nbsp&nbsp;}<br>&nbsp&nbsp&nbsp&nbsp;}<br><br>&nbsp&nbsp&nbsp&nbsp;ofstream fichier("Stats.txt");<br>&nbsp&nbsp&nbsp&nbsp; <span style='color:blue'> for</span> ( <span style='color:blue'> auto</span> s = stats.begin(); s != stats.end(); s++)<br>&nbsp&nbsp&nbsp&nbsp;&nbsp&nbsp&nbsp&nbsp;fichier &lt;&lt; s-&gt;first &lt;&lt; " : " &lt;&lt; s-&gt;second &lt;&lt; endl;<br>&nbsp&nbsp&nbsp&nbsp;fichier.close();<br>}<br>